<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width">
    <title>MDOC</title>
    <link rel="icon" type="image/png" href="mdocicon.png">
    <link href="style.css" rel="stylesheet" type="text/css" />
    <link href="mdocicon.png" rel="icon" type="image/png" />
    <script src="https://cdn.ckeditor.com/ckeditor5/28.0.0/decoupled-document/ckeditor.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="https://rawgit.com/jackmoore/autosize/master/dist/autosize.min.js"></script>
</head>
<body>

<div id="top-bar">
    <div id="link-button"></div>
    <div id="share-button"></div>
    <input id="mdoc-title" onchange="saveDocTitle(this)" th:value="${title}">

<!--    <div class="button-container-wrapper">-->
<!--        <div class="button-container">-->
<!--            <button class="button-container-button" style="background:#ABEBC6">open</button>-->
<!--            <button class="button-container-button" style="background:#AED6F1">share</button>-->
<!--            <button class="button-container-button" style="background:#EC7063">delete</button>-->
<!--            <button class="button-container-button" style="background:#D2B4DE">collect</button>-->
<!--        </div>-->
<!--        <div class="button-container">-->
<!--            <button class="button-container-button" style="background:#FADBD8">delete block</button>-->
<!--            <button class="button-container-button" style="background:#F5B7B1">delete version</button>-->
<!--            <button class="button-container-button" style="background:#F5B041">star</button>-->
<!--        </div>-->
<!--    </div>-->

    <div id="toolbar-container"></div>
</div>

<div id="new-block">
    <div id="new-block-sign">Add new block<button id="new-block-close" onclick="hideNewBlock()">X</button></div>
    <input class="new-block-input" id="new-block-title" placeholder="Block title">
    <input class="new-block-input" id="new-block-author" placeholder="Author">
    <button id="new-block-submit" onclick="addNewBlock(this.parentElement)">Create new block</button>
</div>

<div id="new-version">
    <div id="new-version-sign">Add new version<button id="new-version-close" onclick="hideNewVersion()">X</button></div>
    <div style="display:flex">
        <div>To block #</div><div id="new-version-block-number"></div>
    </div>
    <div style="display:flex">
        "<div id="new-version-block-title"></div>"
    </div>
    <br>
    <input id="new-version-author" placeholder="Author">
    <button id="new-version-submit" onclick="addNewVersion(this.parentElement)">Create new version</button>
</div>

<div id="content" th:fragment="content">

    <div class="block" th:each="block : ${blocks}">
        <div class="version-content" th:each="ver : ${block.getVersions()}" th:utext="${ver.getContent().getContent()}" hidden></div>
        <div class="version-author" th:each="ver : ${block.getVersions()}" th:text="${ver.getAuthor()}" hidden></div>
        <div class="block-content">
            <div class="editor"><textarea class="textarea-editor" onchange="saveVersion(this)">[[${block.getVersions().get(0).getContent().getContent()}]]</textarea></div>
        </div>
        <div class="block-controller">
            <div class="left-ctrl">
                <div class="block-number" th:text="${blocks.indexOf(block)+1}"></div>
                <input class="block-name" onchange="saveBlockTitle(this)" th:value="${block.getTitle()}">
            </div>
            <div class="middle-ctrl">
                <button class="block-left" onclick="changeVersion(this, false)">
                    <
                </button>
                <div class="block-version">1</div>/<div class="block-version block-max-version" th:text="${block.getVersions().size()}"></div>
                <button class="block-right" onclick="changeVersion(this, true)">
                    >
                </button>
            </div>
            <div class="right-ctrl">
                <input class="block-author" th:value="${block.getVersions().get(0).getAuthor()}" onchange="saveVersionAuthor(this)">
                <button class="block-add-version" onclick="showNewVersion(this)">
                    +
                </button>
            </div>
        </div>
    </div>

</div>


<center><div id="add-block-button" onclick="showNewBlock()">+</div></center>


<script src="redactor.js"></script>

</body>
</html>